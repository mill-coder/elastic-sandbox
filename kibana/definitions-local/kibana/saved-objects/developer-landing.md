# Developer Landing Page & Guide Dashboards

Design reference for the developer landing page and companion deep-dive guide dashboards.
This file is intended for Claude Code to re-read when adapting, extending, or debugging these dashboards.

## Identifiers

| Object | Type | ID | File |
|---|---|---|---|
| Developer Landing Page | `dashboard` | `dev-landing-00000000-0000-0000-0000-000000000001` | `developer-landing.ndjson` |
| Guide: Logstash Pipelines | `dashboard` | `dev-guide-00000000-0000-0000-0000-000000000002` | `guide-logstash-pipelines.ndjson` |
| Guide: Alerting & Mattermost | `dashboard` | `dev-guide-00000000-0000-0000-0000-000000000003` | `guide-alerting-mattermost.ndjson` |

All three dashboards use **pure Markdown panels** — no index patterns, saved searches, or data dependencies.
They can be imported into any Kibana instance with just `--profile kibana`.

## Dashboard 1: Developer Landing Page

### Layout (48-column grid, 6 panels)

| Panel | ID | Grid (x,y,w,h) | Content |
|---|---|---|---|
| Welcome | `p-welcome` | 0,0,30,8 | Sandbox purpose, capabilities, golden paths teaser |
| Quick Reference | `p-quickref` | 30,0,18,8 | Credentials (elastic/changeme, sample users), ports |
| Logstash Pipeline | `p-logstash` | 0,8,24,16 | Golden path summary (6 steps), link to guide dashboard |
| Alert to Mattermost | `p-alerting` | 24,8,24,16 | Golden path summary (6 steps), link to guide dashboard |
| Apps & Dashboards | `p-apps` | 0,24,24,8 | Links to Discover, Dashboards, Pipeline Management, etc. |
| Spaces & Resources | `p-spaces` | 24,24,24,8 | Available spaces table, GitHub/docs links |

### Internal links

- Logstash golden path → Guide dashboard: `/app/dashboards#/view/dev-guide-00000000-0000-0000-0000-000000000002`
- Alerting golden path → Guide dashboard: `/app/dashboards#/view/dev-guide-00000000-0000-0000-0000-000000000003`
- Logstash Monitoring dashboard: `/app/dashboards#/view/f8a015a7-5bdf-489a-8db4-19944db6be5c`
- Discover: `/app/discover`
- Pipeline Management: `/app/management/logstash/pipelines`
- Alerting Rules: `/app/management/insightsAndAlerting/triggersActions/rules`
- Connectors: `/app/management/insightsAndAlerting/triggersActionsConnectors/connectors`

## Dashboard 2: Guide — Logstash Pipeline Development

### Layout (48-column grid, 6 panels)

| Panel | ID | Grid (x,y,w,h) | Content |
|---|---|---|---|
| Overview | `lg-overview` | 0,0,48,16 | Architecture diagram, satellite containers |
| Step-by-Step | `lg-steps` | 0,16,48,28 | Expanded 6-step golden path with commands |
| Pipeline .conf Format | `lg-conf` | 0,44,24,16 | Input/filter/output structure, env vars |
| Reference Pipelines | `lg-reference` | 24,44,24,16 | Table of examples in `logstash/pipelines/reference/` |
| Monitoring Dashboard | `lg-monitoring` | 0,60,24,14 | How the monitoring dashboard works |
| Troubleshooting | `lg-troubleshoot` | 24,60,24,14 | Common errors, DLQ, health checker |

## Dashboard 3: Guide — Alerting & Mattermost

### Layout (48-column grid, 6 panels)

| Panel | ID | Grid (x,y,w,h) | Content |
|---|---|---|---|
| Overview | `ag-overview` | 0,0,48,12 | How alerting works, deploy flow diagram |
| Step-by-Step | `ag-steps` | 0,12,48,26 | Expanded 6-step golden path with commands |
| .alert File Format | `ag-alert-fmt` | 0,38,24,22 | JSON schema, params for each rule type |
| Mustache Reference | `ag-mustache` | 24,38,24,22 | Complete variable reference for all rule types |
| Mattermost Setup | `ag-mattermost` | 0,60,24,14 | Auto-provisioned resources, connector naming |
| Troubleshooting | `ag-troubleshoot` | 24,60,24,14 | Common errors, debugging commands |

## Panel construction pattern

All panels are Markdown visualizations (`type: "visualization"` with `savedVis.type: "markdown"`).
No index-pattern references are needed — the dashboard `references` array is empty.

```json
{
  "type": "visualization",
  "embeddableConfig": {
    "savedVis": {
      "title": "Panel Title",
      "description": "",
      "type": "markdown",
      "params": {
        "fontSize": 12,
        "openLinksInNewTab": false,
        "markdown": "... content ..."
      },
      "uiState": {},
      "data": {
        "aggs": [],
        "searchSource": {
          "query": {"query": "", "language": "kuery"},
          "filter": []
        }
      }
    },
    "enhancements": {}
  },
  "panelIndex": "{panelId}",
  "gridData": {"i": "{panelId}", "x": ..., "y": ..., "w": ..., "h": ...}
}
```

## How to modify

### Regeneration approach

The NDJSON files are generated by `/tmp/build-landing-dashboards.py`. To modify:

1. Edit the Python script's markdown content strings
2. Re-run: `python3 /tmp/build-landing-dashboards.py`
3. Re-import (see below)

Or edit directly in Kibana UI and re-export.

### Import (all 3 dashboards)

```bash
for f in developer-landing guide-logstash-pipelines guide-alerting-mattermost; do
  curl -s -u elastic:changeme \
    -X POST "http://localhost:5601/api/saved_objects/_import?overwrite=true" \
    -H "kbn-xsrf: true" \
    -F "file=@kibana/definitions-local/kibana/saved-objects/${f}.ndjson"
  echo
done
```

### Export (after UI edits)

```bash
for id in dev-landing-00000000-0000-0000-0000-000000000001 dev-guide-00000000-0000-0000-0000-000000000002 dev-guide-00000000-0000-0000-0000-000000000003; do
  name=$(echo "$id" | sed 's/dev-landing/developer-landing/;s/dev-guide-00000000-0000-0000-0000-000000000002/guide-logstash-pipelines/;s/dev-guide-00000000-0000-0000-0000-000000000003/guide-alerting-mattermost/')
  curl -s -u elastic:changeme \
    -X POST "http://localhost:5601/api/saved_objects/_export" \
    -H "kbn-xsrf: true" -H "Content-Type: application/json" \
    -d "{\"objects\":[{\"type\":\"dashboard\",\"id\":\"${id}\"}],\"includeReferencesDeep\":true}" \
    -o "kibana/definitions-local/kibana/saved-objects/${name}.ndjson"
done
```

After importing via API while Kibana is already open, click **Reset** on the "Unsaved changes" banner (or clear `sessionStorage` and hard-reload) — the Kibana SPA caches the old dashboard state.

### Adding a new panel

1. Choose a unique panel ID (short string, e.g. `p-newpanel`)
2. Write the markdown content
3. Add a panel entry to `panelsJSON` with correct `gridData` (48-column grid)
4. Adjust neighboring panels if needed to avoid overlaps
5. Re-generate and re-import

## Deployment

These dashboards are imported by `kibana-init` in `install/compose.yaml` when
`DEPLOY_SAMPLE_USERS=true` and the `definitions-local` directory is mounted.
The import uses `install/import-saved-objects.sh` with `OBJECTS_DIR=/definitions-local/kibana/saved-objects`.
